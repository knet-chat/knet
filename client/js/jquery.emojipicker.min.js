!function($){function Plugin(element,options){this.element=element,this.$el=$(element),this.settings=$.extend({},defaults,options),this.$container=$(this.settings.container),this.settings.width=parseInt(this.settings.width),this.settings.height=parseInt(this.settings.height),this.settings.width>=MAX_WIDTH?this.settings.width=MAX_WIDTH:this.settings.width<MIN_WIDTH&&(this.settings.width=MIN_WIDTH),this.settings.height>=MAX_HEIGHT?this.settings.height=MAX_HEIGHT:this.settings.height<MIN_HEIGHT&&(this.settings.height=MIN_HEIGHT),this.init()}function getPickerHTML(){var nodes=[],categories=[{name:"emotion",symbol:"grinning"},{name:"animal",symbol:"whale"},{name:"food",symbol:"hamburger"},{name:"folderol",symbol:"sunny"},{name:"thing",symbol:"kiss"},{name:"travel",symbol:"rocket"}],aliases={people:"emotion",symbol:"thing",undefined:"thing"},items={};$.each($.fn.emojiPicker.emojis,function(i,emoji){var category=aliases[emoji.category]||emoji.category;items[category]=items[category]||[],items[category].push(emoji)}),nodes.push('<div class="emojiPicker">'),nodes.push("<nav>");for(var i in categories)nodes.push('<div class="tab'+(0==i?" active":"")+'" data-tab="'+categories[i].name+'"><div class="emoji emoji-'+categories[i].symbol+'"></div></div>');nodes.push("</nav>");for(var i in categories){nodes.push('<section class="'+categories[i].name+(0==i?"":" hidden")+'">');for(var j in items[categories[i].name]){var emoji=items[categories[i].name][j];nodes.push('<div class="emoji emoji-'+emoji.shortcode+'"></div>')}nodes.push("</section>")}return nodes.push("</div>"),nodes.join("\n")}function findEmoji(emojiShortcode){for(var emojis=$.fn.emojiPicker.emojis,i=0;i<emojis.length;i++)if(emojis[i].shortcode==emojiShortcode)return emojis[i]}function insertAtCaret(inputField,myValue){if(document.selection){inputField.focus();var sel=document.selection.createRange();sel.text=myValue,inputField.focus()}else if(inputField.selectionStart||"0"==inputField.selectionStart){var startPos=inputField.selectionStart,endPos=inputField.selectionEnd,scrollTop=inputField.scrollTop;inputField.value=inputField.value.substring(0,startPos)+myValue+inputField.value.substring(endPos,inputField.value.length),inputField.focus(),inputField.selectionStart=startPos+myValue.length,inputField.selectionEnd=startPos+myValue.length,inputField.scrollTop=scrollTop}else inputField.focus(),inputField.value+=myValue}function toUnicode(code){var codes=code.split("-").map(function(value,index){return parseInt(value,16)});return String.fromCodePoint.apply(null,codes)}var pluginName="emojiPicker",defaults={width:"200",height:"350",position:"top",fadeTime:10,iconColor:"black",iconBackgroundColor:"#eee",container:"body",button:!0},MIN_WIDTH=200,MAX_WIDTH=$(window).width(),MIN_HEIGHT=100,MAX_HEIGHT=$(window).height(),MAX_ICON_HEIGHT=200;$.extend(Plugin.prototype,{init:function(){this.active=!1,this.addPickerIcon(),this.createPicker(),this.listen()},addPickerIcon:function(){var elementHeight=this.$el.outerHeight(),iconHeight=elementHeight>MAX_ICON_HEIGHT?MAX_ICON_HEIGHT:elementHeight,objectWidth=this.$el.width();this.$el.width(objectWidth),this.$wrapper=this.$el.wrap("<div class='emojiPickerIconWrap'></div>").parent(),this.settings.button&&(this.$icon=$('<div class="emojiPickerIcon"></div>').height(iconHeight).width(iconHeight).addClass(this.settings.iconColor).css("backgroundColor",this.settings.iconBackgroundColor),this.$wrapper.append(this.$icon))},createPicker:function(){this.$picker=$(getPickerHTML()).appendTo(this.$container).width(this.settings.width).height(this.settings.height).css("z-index",1e4),this.$picker.find("section").height(parseInt(this.settings.height)-40),this.settings.width<240&&this.$picker.find(".emoji").css({width:"2em",height:"2em"})},listen:function(){this.$wrapper.find(".emojiPickerIcon").click($.proxy(this.iconClicked,this)),this.$picker.find("section div").click($.proxy(this.emojiClicked,this)),this.$picker.find("nav .tab").click($.proxy(this.emojiCategoryClicked,this)),this.$picker.click($.proxy(this.pickerClicked,this)),$(document.body).click($.proxy(this.clickOutside,this))},updatePosition:function(){var top,left;return top=0,left=0,this.$picker.css({top:top,left:left}),this},hide:function(){this.$picker.hide(this.settings.fadeTime,"linear",function(){this.active=!1}.bind(this))},show:function(){this.updatePosition(),this.$picker.show(this.settings.fadeTime,"linear",function(){this.active=!0}.bind(this))},iconClicked:function(e){this.$picker.is(":hidden")?this.show():this.hide()},reset:function(){this.$picker.width($(window).width()),this.$picker.height($(window).height())},emojiClicked:function(e){var emojiShortcode=$(e.target).attr("class").split("emoji-")[1],emojiUnicode=toUnicode(findEmoji(emojiShortcode).unicode);insertAtCaret(this.element,emojiUnicode),$("body").pagecontainer("change","#chat-page"),this.hide()},emojiCategoryClicked:function(e){var section="";this.$picker.find("nav .tab").removeClass("active"),$(e.target).parent().hasClass("tab")?(section=$(e.target).parent().attr("data-tab"),$(e.target).parent(".tab").addClass("active")):(section=$(e.target).attr("data-tab"),$(e.target).addClass("active")),this.$picker.find("section").hide(),this.$picker.find("section."+section).show()},pickerClicked:function(e){e.stopPropagation()},clickOutside:function(e){this.active&&this.hide()}}),$.fn[pluginName]=function(options){return"string"==typeof options?(this.each(function(){var plugin=$.data(this,pluginName);switch(options){case"toggle":plugin.iconClicked();break;case"reset":plugin.reset();break;case"hide":plugin.clickOutside()}}),this):(this.each(function(){$.data(this,pluginName)?($.data(this,pluginName,{}),$.data(this,pluginName,new Plugin(this,options))):$.data(this,pluginName,new Plugin(this,options))}),this)},String.fromCodePoint||(String.fromCodePoint=function(){var point,offset,units,i,chars=[];for(i=0;i<arguments.length;++i)point=arguments[i],offset=point-65536,units=point>65535?[55296+(offset>>10),56320+(1023&offset)]:[point],chars.push(String.fromCharCode.apply(null,units));return chars.join("")})}(jQuery);
//# sourceMappingURL=sourcemap.map