!function(factory){"function"==typeof define&&define.amd?define(["../cldr"],factory):"object"==typeof module&&"object"==typeof module.exports?module.exports=factory(require("cldrjs")):factory(Cldr)}(function(Cldr){function validateTypeEvent(value,name){validateType(value,name,"string"==typeof value||value instanceof RegExp,"String or RegExp")}function validateThenCall(method,self){return function(event,listener){return validatePresence(event,"event"),validateTypeEvent(event,"event"),validatePresence(listener,"listener"),validateTypeFunction(listener,"listener"),self[method].apply(self,arguments)}}function off(self){return validateThenCall("off",self)}function on(self){return validateThenCall("on",self)}function once(self){return validateThenCall("once",self)}function getOverload(){superGet=Cldr.prototype.get,Cldr.prototype.get=function(path){var value=superGet.apply(this,arguments);return path=pathNormalize(path,this.attributes).join("/"),globalEe.trigger("get",[path,value]),this.ee.trigger("get",[path,value]),value}}var EventEmitter,pathNormalize=Cldr._pathNormalize,validatePresence=Cldr._validatePresence,validateType=Cldr._validateType;EventEmitter=function(){function EventEmitter(){}function indexOfListener(listeners,listener){for(var i=listeners.length;i--;)if(listeners[i].listener===listener)return i;return-1}function alias(name){return function(){return this[name].apply(this,arguments)}}var proto=EventEmitter.prototype,exports=this,originalGlobalValue=exports.EventEmitter;return proto.getListeners=function(evt){var response,key,events=this._getEvents();if(evt instanceof RegExp){response={};for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&(response[key]=events[key])}else response=events[evt]||(events[evt]=[]);return response},proto.flattenListeners=function(listeners){var i,flatListeners=[];for(i=0;i<listeners.length;i+=1)flatListeners.push(listeners[i].listener);return flatListeners},proto.getListenersAsObject=function(evt){var response,listeners=this.getListeners(evt);return listeners instanceof Array&&(response={},response[evt]=listeners),response||listeners},proto.addListener=function(evt,listener){var key,listeners=this.getListenersAsObject(evt),listenerIsWrapped="object"==typeof listener;for(key in listeners)listeners.hasOwnProperty(key)&&indexOfListener(listeners[key],listener)===-1&&listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:!1});return this},proto.on=alias("addListener"),proto.addOnceListener=function(evt,listener){return this.addListener(evt,{listener:listener,once:!0})},proto.once=alias("addOnceListener"),proto.defineEvent=function(evt){return this.getListeners(evt),this},proto.defineEvents=function(evts){for(var i=0;i<evts.length;i+=1)this.defineEvent(evts[i]);return this},proto.removeListener=function(evt,listener){var index,key,listeners=this.getListenersAsObject(evt);for(key in listeners)listeners.hasOwnProperty(key)&&(index=indexOfListener(listeners[key],listener),index!==-1&&listeners[key].splice(index,1));return this},proto.off=alias("removeListener"),proto.addListeners=function(evt,listeners){return this.manipulateListeners(!1,evt,listeners)},proto.removeListeners=function(evt,listeners){return this.manipulateListeners(!0,evt,listeners)},proto.manipulateListeners=function(remove,evt,listeners){var i,value,single=remove?this.removeListener:this.addListener,multiple=remove?this.removeListeners:this.addListeners;if("object"!=typeof evt||evt instanceof RegExp)for(i=listeners.length;i--;)single.call(this,evt,listeners[i]);else for(i in evt)evt.hasOwnProperty(i)&&(value=evt[i])&&("function"==typeof value?single.call(this,i,value):multiple.call(this,i,value));return this},proto.removeEvent=function(evt){var key,type=typeof evt,events=this._getEvents();if("string"===type)delete events[evt];else if(evt instanceof RegExp)for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&delete events[key];else delete this._events;return this},proto.removeAllListeners=alias("removeEvent"),proto.emitEvent=function(evt,args){var listener,i,key,response,listeners=this.getListenersAsObject(evt);for(key in listeners)if(listeners.hasOwnProperty(key))for(i=listeners[key].length;i--;)listener=listeners[key][i],listener.once===!0&&this.removeListener(evt,listener.listener),response=listener.listener.apply(this,args||[]),response===this._getOnceReturnValue()&&this.removeListener(evt,listener.listener);return this},proto.trigger=alias("emitEvent"),proto.emit=function(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args)},proto.setOnceReturnValue=function(value){return this._onceReturnValue=value,this},proto._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},proto._getEvents=function(){return this._events||(this._events={})},EventEmitter.noConflict=function(){return exports.EventEmitter=originalGlobalValue,EventEmitter},EventEmitter}();var superGet,superInit,validateTypeFunction=function(value,name){validateType(value,name,"undefined"==typeof value||"function"==typeof value,"Function")},globalEe=new EventEmitter;return Cldr.off=off(globalEe),Cldr.on=on(globalEe),Cldr.once=once(globalEe),superInit=Cldr.prototype.init,Cldr.prototype.init=function(){var ee;this.ee=ee=new EventEmitter,this.off=off(ee),this.on=on(ee),this.once=once(ee),superInit.apply(this,arguments)},Cldr._eventInit=getOverload,getOverload(),Cldr});
//# sourceMappingURL=../sourcemap.map