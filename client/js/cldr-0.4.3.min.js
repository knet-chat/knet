!function(root,factory){"function"==typeof define&&define.amd?define(factory):"object"==typeof module&&"object"==typeof module.exports?module.exports=factory():root.Cldr=factory()}(this,function(){var arrayIsArray=Array.isArray||function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},pathNormalize=function(path,attributes){if(arrayIsArray(path)&&(path=path.join("/")),"string"!=typeof path)throw new Error('invalid path "'+path+'"');return path=path.replace(/^\//,"").replace(/^cldr\//,""),path=path.replace(/{[a-zA-Z]+}/g,function(name){return name=name.replace(/^{([^}]*)}$/,"$1"),attributes[name]}),path.split("/")},arraySome=function(array,callback){var i,length;if(array.some)return array.some(callback);for(i=0,length=array.length;i<length;i++)if(callback(array[i],i,array))return!0;return!1},coreLikelySubtags=function(Cldr,cldr,subtags,options){var match,matchFound,language=subtags[0],script=subtags[1],sep=Cldr.localeSep,territory=subtags[2];return options=options||{},"und"!==language&&"Zzzz"!==script&&"ZZ"!==territory?[language,script,territory]:"undefined"!=typeof cldr.get("supplemental/likelySubtags")?(matchFound=arraySome([[language,script,territory],[language,territory],[language,script],[language],["und",script]],function(test){return match=!/\b(Zzzz|ZZ)\b/.test(test.join(sep))&&cldr.get(["supplemental/likelySubtags",test.join(sep)])}),matchFound?(match=match.split(sep),["und"!==language?language:match[0],"Zzzz"!==script?script:match[1],"ZZ"!==territory?territory:match[2]]):options.force?cldr.get("supplemental/likelySubtags/und").split(sep):void 0):void 0},coreRemoveLikelySubtags=function(Cldr,cldr,maxLanguageId){var match,matchFound,language=maxLanguageId[0],script=maxLanguageId[1],territory=maxLanguageId[2];return matchFound=arraySome([[[language,"Zzzz","ZZ"],[language]],[[language,"Zzzz",territory],[language,territory]],[[language,script,"ZZ"],[language,script]]],function(test){var result=coreLikelySubtags(Cldr,cldr,test[0]);return match=test[1],result&&result[0]===maxLanguageId[0]&&result[1]===maxLanguageId[1]&&result[2]===maxLanguageId[2]}),matchFound?match:maxLanguageId},coreSubtags=function(locale){var aux,unicodeLanguageId,subtags=[];return locale=locale.replace(/_/,"-"),aux=locale.split("-u-"),aux[1]&&(aux[1]=aux[1].split("-t-"),locale=aux[0]+(aux[1][1]?"-t-"+aux[1][1]:""),subtags[4]=aux[1][0]),unicodeLanguageId=locale.split("-t-")[0],aux=unicodeLanguageId.match(/^(([a-z]{2,3})(-([A-Z][a-z]{3}))?(-([A-Z]{2}|[0-9]{3}))?)(-[a-zA-Z0-9]{5,8}|[0-9][a-zA-Z0-9]{3})*$|^(root)$/),null===aux?["und","Zzzz","ZZ"]:(subtags[0]=aux[9]||aux[2]||"und",subtags[1]=aux[4]||"Zzzz",subtags[2]=aux[6]||"ZZ",subtags[3]=aux[7],subtags)},arrayForEach=function(array,callback){var i,length;if(array.forEach)return array.forEach(callback);for(i=0,length=array.length;i<length;i++)callback(array[i],i,array)},bundleLookup=function(Cldr,cldr,minLanguageId){var availableBundleMap=Cldr._availableBundleMap,availableBundleMapQueue=Cldr._availableBundleMapQueue;return availableBundleMapQueue.length&&(arrayForEach(availableBundleMapQueue,function(bundle){var existing,maxBundle,minBundle,subtags;subtags=coreSubtags(bundle),maxBundle=coreLikelySubtags(Cldr,cldr,subtags,{force:!0})||subtags,minBundle=coreRemoveLikelySubtags(Cldr,cldr,maxBundle),minBundle=minBundle.join(Cldr.localeSep),existing=availableBundleMapQueue[minBundle],existing&&existing.length<bundle.length||(availableBundleMap[minBundle]=bundle)}),Cldr._availableBundleMapQueue=[]),availableBundleMap[minLanguageId]||null},objectKeys=function(object){var i,result=[];if(Object.keys)return Object.keys(object);for(i in object)result.push(i);return result},createError=function(code,attributes){var error,message;return message=code+(attributes&&JSON?": "+JSON.stringify(attributes):""),error=new Error(message),error.code=code,arrayForEach(objectKeys(attributes),function(attribute){error[attribute]=attributes[attribute]}),error},validate=function(code,check,attributes){if(!check)throw createError(code,attributes)},validatePresence=function(value,name){validate("E_MISSING_PARAMETER","undefined"!=typeof value,{name:name})},validateType=function(value,name,check,expected){validate("E_INVALID_PAR_TYPE",check,{expected:expected,name:name,value:value})},validateTypePath=function(value,name){validateType(value,name,"string"==typeof value||arrayIsArray(value),"String or Array")},isPlainObject=function(obj){return null!==obj&&""+obj=="[object Object]"},validateTypePlainObject=function(value,name){validateType(value,name,"undefined"==typeof value||isPlainObject(value),"Plain Object")},validateTypeString=function(value,name){validateType(value,name,"string"==typeof value,"a string")},resourceGet=function(data,path){var i,node=data,length=path.length;for(i=0;i<length-1;i++)if(node=node[path[i]],!node)return;return node[path[i]]},coreSetAvailableBundles=function(Cldr,json){var bundle,availableBundleMapQueue=Cldr._availableBundleMapQueue,main=resourceGet(json,["main"]);if(main)for(bundle in main)main.hasOwnProperty(bundle)&&"root"!==bundle&&availableBundleMapQueue.push(bundle)},alwaysArray=function(somethingOrArray){return arrayIsArray(somethingOrArray)?somethingOrArray:[somethingOrArray]},jsonMerge=function(){var merge=function(){var destination={},sources=[].slice.call(arguments,0);return arrayForEach(sources,function(source){var prop;for(prop in source)prop in destination&&"object"==typeof destination[prop]&&!arrayIsArray(destination[prop])?destination[prop]=merge(destination[prop],source[prop]):destination[prop]=source[prop]}),destination};return merge}(),coreLoad=function(Cldr,source,jsons){var i,j,json;for(validatePresence(jsons[0],"json"),i=0;i<jsons.length;i++)for(json=alwaysArray(jsons[i]),j=0;j<json.length;j++)validateTypePlainObject(json[j],"json"),source=jsonMerge(source,json[j]),coreSetAvailableBundles(Cldr,json[j]);return source},itemGetResolved=function(Cldr,path,attributes){var normalizedPath=pathNormalize(path,attributes);return resourceGet(Cldr._resolved,normalizedPath)},Cldr=function(locale){this.init(locale)};return Cldr._alwaysArray=alwaysArray,Cldr._coreLoad=coreLoad,Cldr._createError=createError,Cldr._itemGetResolved=itemGetResolved,Cldr._jsonMerge=jsonMerge,Cldr._pathNormalize=pathNormalize,Cldr._resourceGet=resourceGet,Cldr._validatePresence=validatePresence,Cldr._validateType=validateType,Cldr._validateTypePath=validateTypePath,Cldr._validateTypePlainObject=validateTypePlainObject,Cldr._availableBundleMap={},Cldr._availableBundleMapQueue=[],Cldr._resolved={},Cldr.localeSep="-",Cldr.load=function(){Cldr._resolved=coreLoad(Cldr,Cldr._resolved,arguments)},Cldr.prototype.init=function(locale){var attributes,language,maxLanguageId,minLanguageId,script,subtags,territory,unicodeLocaleExtensions,variant,sep=Cldr.localeSep;validatePresence(locale,"locale"),validateTypeString(locale,"locale"),subtags=coreSubtags(locale),unicodeLocaleExtensions=subtags[4],variant=subtags[3],maxLanguageId=coreLikelySubtags(Cldr,this,subtags,{force:!0})||subtags,language=maxLanguageId[0],script=maxLanguageId[1],territory=maxLanguageId[2],minLanguageId=coreRemoveLikelySubtags(Cldr,this,maxLanguageId).join(sep),this.attributes=attributes={bundle:bundleLookup(Cldr,this,minLanguageId),minlanguageId:minLanguageId,maxLanguageId:maxLanguageId.join(sep),language:language,script:script,territory:territory,region:territory,variant:variant},unicodeLocaleExtensions&&("-"+unicodeLocaleExtensions).replace(/-[a-z]{3,8}|(-[a-z]{2})-([a-z]{3,8})/g,function(attribute,key,type){key?attributes["u"+key]=type:attributes["u"+attribute]=!0}),this.locale=locale},Cldr.prototype.get=function(path){return validatePresence(path,"path"),validateTypePath(path,"path"),itemGetResolved(Cldr,path,this.attributes)},Cldr.prototype.main=function(path){return validatePresence(path,"path"),validateTypePath(path,"path"),validate("E_MISSING_BUNDLE",null!==this.attributes.bundle,{locale:this.locale}),path=alwaysArray(path),this.get(["main/{bundle}"].concat(path))},Cldr});
//# sourceMappingURL=sourcemap.map